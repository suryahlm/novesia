!function(e,t,i,n){"use strict";var s="WordpressUlikeAjaxForms",o=(e(t),e(i)),a={};function r(t,i){this.element=t,this.$element=e(t),this.settings=e.extend({},a,i),this._defaults=a,this._name=s,this.form=this.$element.find("form"),this.init()}e.extend(r.prototype,{init:function(){this.form.on("submit",this._submit.bind(this))},_ajax:function(t,i){e.ajax({url:UlikeProCommonConfig.AjaxUrl,type:"POST",cache:!1,dataType:"json",data:t}).done(i)},_submit:function(t){t.preventDefault(),t.stopPropagation(),o.trigger("UlpAjaxFormStarted",[this.element]),this.currentForm=e(t.currentTarget),this.buttonElement=this.currentForm.find(".ulp-button");var i={};e.each(this.currentForm.serializeArray(),(function(){undefined!==i[this.name]?(i[this.name].push||(i[this.name]=[i[this.name]]),i[this.name].push(this.value||"")):i[this.name]=this.value||""})),this.buttonElement.prop("disabled",!0),this.currentForm.addClass("ulp-loading"),this._submitFormData(i)},_submitFormData:function(i){this._ajax(i,function(i){void 0!==i.data.action&&i.data.action&&this._submitFormData(i.data),this.currentForm.removeClass("ulp-loading"),this.buttonElement.prop("disabled",!1),void 0!==i.data.message&&i.data.message&&this._sendNotification(i.data.status,i.data.message),void 0!==i.data.fragments&&i.data.fragments&&e.each(i.data.fragments,(function(t,i){switch(i.method){case"prepend":e(t).prepend(i.content);break;case"hidden":e(t).addClass("ulp-hidden-visually");break;default:e(t).append(i.content)}})),void 0!==i.data.replace&&i.data.replace&&this.currentForm.replaceWith(i.data.replace),o.trigger("UlpAjaxFormEnded",[this.element,i]),void 0!==i.data.refresh&&i.data.refresh&&location.reload(),void 0!==i.data.redirect&&i.data.redirect&&t.location.replace(i.data.redirect)}.bind(this))},_sendNotification:function(t,n){e(i.body).WordpressUlikeNotifications({messageType:t,messageText:n})}}),e.fn[s]=function(t){return this.each((function(){e.data(this,"plugin_"+s)||e.data(this,"plugin_"+s,new r(this,t))}))}}(jQuery,window,document),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}((function(e){"use strict";if(void 0!==e)if(e.fn.jquery.match(/-ajax/))"console"in window&&window.console.info("WordpressUlikeAjaxModal needs regular jQuery, not the slim version.");else{var t=[],i=function(i){return t=e.grep(t,(function(e){return e!==i&&e.$instance.closest("body").length>0}))},n={allow:1,allowfullscreen:1,frameborder:1,height:1,longdesc:1,marginheight:1,marginwidth:1,mozallowfullscreen:1,name:1,referrerpolicy:1,sandbox:1,scrolling:1,src:1,srcdoc:1,style:1,webkitallowfullscreen:1,width:1},s={keyup:"onKeyUp",resize:"onResize"},o=function(t){e.each(r.opened().reverse(),(function(){if(!t.isDefaultPrevented()&&!1===this[s[t.type]](t))return t.preventDefault(),t.stopPropagation(),!1}))},a=function(t){if(t!==r._globalHandlerInstalled){r._globalHandlerInstalled=t;var i=e.map(s,(function(e,t){return t+"."+r.prototype.namespace})).join(" ");e(window)[t?"on":"off"](i,o)}};r.prototype={constructor:r,namespace:"ulpmodal",targetAttr:"data-ulpmodal",variant:null,resetCss:!1,background:null,openTrigger:"click",closeTrigger:"click",filter:null,root:"body",openSpeed:250,closeSpeed:250,closeOnClick:"background",closeOnEsc:!0,closeIcon:"&#10005;",loading:"",persist:!1,otherClose:null,beforeOpen:e.noop,beforeContent:e.noop,beforeClose:e.noop,afterOpen:e.noop,afterContent:e.noop,afterClose:e.noop,onKeyUp:e.noop,onResize:e.noop,type:null,contentFilters:["jquery","image","html","ajax","iframe","text"],setup:function(t,i){"object"!=typeof t||t instanceof e!=!1||i||(i=t,t=void 0);var n=e.extend(this,i,{target:t}),s=n.resetCss?n.namespace+"-reset":n.namespace,o=e(n.background||['<div class="'+s+"-loading "+s+'">','<div class="'+s+'-content">','<button class="'+s+"-close-icon "+n.namespace+'-close" aria-label="Close">',n.closeIcon,"</button>",'<div class="'+n.namespace+'-inner">'+n.loading+"</div>","</div>","</div>"].join("")),a="."+n.namespace+"-close"+(n.otherClose?","+n.otherClose:"");return n.$instance=o.clone().addClass(n.variant),n.$instance.on(n.closeTrigger+"."+n.namespace,(function(t){if(!t.isDefaultPrevented()){var i=e(t.target);("background"===n.closeOnClick&&i.is("."+n.namespace)||"anywhere"===n.closeOnClick||i.closest(a).length)&&(n.close(t),t.preventDefault())}})),this},getContent:function(){if(!1!==this.persist&&this.$content)return this.$content;var t=this,i=this.constructor.contentFilters,n=function(e){return t.$currentTarget&&t.$currentTarget.attr(e)},s=n(t.targetAttr),o=t.target||s||"",a=i[t.type];if(!a&&o in i&&(a=i[o],o=t.target&&s),o=o||n("href")||"",!a)for(var r in i)t[r]&&(a=i[r],o=t[r]);if(!a){var l=o;if(o=null,e.each(t.contentFilters,(function(){return(a=i[this]).test&&(o=a.test(l)),!o&&a.regex&&l.match&&l.match(a.regex)&&(o=l),!o})),!o)return"console"in window&&window.console.error("WordpressUlikeAjaxModal: no content filter found "+(l?' for "'+l+'"':" (no target specified)")),!1}return a.process.call(t,o)},setContent:function(t){return this.$instance.removeClass(this.namespace+"-loading"),this.$instance.toggleClass(this.namespace+"-iframe",t.is("iframe")),this.$instance.find("."+this.namespace+"-inner").not(t).slice(1).remove().end().replaceWith(e.contains(this.$instance[0],t[0])?"":t),this.$content=t.addClass(this.namespace+"-inner"),this},open:function(i){var n=this;if(n.$instance.hide().appendTo(n.root),!(i&&i.isDefaultPrevented()||!1===n.beforeOpen(i))){i&&i.preventDefault();var s=n.getContent();if(s)return t.push(n),a(!0),n.$instance.fadeIn(n.openSpeed),n.beforeContent(i),e.when(s).always((function(e){e&&(n.setContent(e),n.afterContent(i))})).then(n.$instance.promise()).done((function(){n.afterOpen(i)}))}return n.$instance.detach(),e.Deferred().reject().promise()},close:function(t){var n=this,s=e.Deferred();return!1===n.beforeClose(t)?s.reject():(0===i(n).length&&a(!1),n.$instance.fadeOut(n.closeSpeed,(function(){n.$instance.detach(),n.afterClose(t),s.resolve()}))),s.promise()},resize:function(e,t){if(e&&t){this.$content.css("width","").css("height","");var i=Math.max(e/(this.$content.parent().width()-1),t/(this.$content.parent().height()-1));i>1&&(i=t/Math.floor(t/i),this.$content.css("width",e/i+"px").css("height",t/i+"px"))}},chainCallbacks:function(t){for(var i in t)this[i]=e.proxy(t[i],this,e.proxy(this[i],this))}},e.extend(r,{id:0,autoBind:"[data-ulpmodal]",defaults:r.prototype,contentFilters:{jquery:{regex:/^[#.]\w/,test:function(t){return t instanceof e&&t},process:function(t){return!1!==this.persist?e(t):e(t).clone(!0)}},image:{regex:/\.(png|jpg|jpeg|gif|tiff?|bmp|svg)(\?\S*)?$/i,process:function(t){var i=e.Deferred(),n=new Image,s=e('<img src="'+t+'" alt="" class="'+this.namespace+'-image" />');return n.onload=function(){s.naturalWidth=n.width,s.naturalHeight=n.height,i.resolve(s)},n.onerror=function(){i.reject(s)},n.src=t,i.promise()}},html:{regex:/^\s*<[\w!][^<]*>/,process:function(t){return e(t)}},ajax:{regex:/./,process:function(t){var i=e.Deferred(),n=e("<div></div>").load(t,(function(e,t){"error"!==t&&i.resolve(n.contents()),i.reject()}));return i.promise()}},iframe:{process:function(t){var i=new e.Deferred,s=e("<iframe/>"),o=function(e,t){var i={},n=new RegExp("^"+t+"([A-Z])(.*)");for(var s in e){var o=s.match(n);o&&(i[(o[1]+o[2].replace(/([A-Z])/g,"-$1")).toLowerCase()]=e[s])}return i}(this,"iframe"),a=function(e,t){var i={};for(var n in e)n in t&&(i[n]=e[n],delete e[n]);return i}(o,n);return s.hide().attr("src",t).attr(a).css(o).on("load",(function(){i.resolve(s.show())})).appendTo(this.$instance.find("."+this.namespace+"-content")),i.promise()}},text:{process:function(t){return e("<div>",{text:t})}}},functionAttributes:["beforeOpen","afterOpen","beforeContent","afterContent","beforeClose","afterClose"],readElementConfig:function(t,i){var n=this,s=new RegExp("^data-"+i+"-(.*)"),o={};return t&&t.attributes&&e.each(t.attributes,(function(){var t=this.name.match(s);if(t){var i=this.value,a=e.camelCase(t[1]);if(e.inArray(a,n.functionAttributes)>=0)i=new Function(i);else try{i=JSON.parse(i)}catch(e){}o[a]=i}})),o},extend:function(t,i){var n=function(){this.constructor=t};return n.prototype=this.prototype,t.prototype=new n,t.__super__=this.prototype,e.extend(t,this,i),t.defaults=t.prototype,t},attach:function(t,i,n){var s=this;"object"!=typeof i||i instanceof e!=!1||n||(n=i,i=void 0);var o,a=(n=e.extend({},n)).namespace||s.defaults.namespace,r=e.extend({},s.defaults,s.readElementConfig(t[0],a),n),l=function(a){var l=e(a.currentTarget),u=e.extend({$source:t,$currentTarget:l},s.readElementConfig(t[0],r.namespace),s.readElementConfig(a.currentTarget,r.namespace),n),d=o||l.data("ulpmodal-persisted")||new s(i,u);"shared"===d.persist?o=d:!1!==d.persist&&l.data("ulpmodal-persisted",d),"function"==typeof u.$currentTarget.trigger&&u.$currentTarget.trigger("blur"),d.open(a)};return t.on(r.openTrigger+"."+r.namespace,r.filter,l),{filter:r.filter,handler:l}},current:function(){var e=this.opened();return e[e.length-1]||null},opened:function(){var n=this;return i(),e.grep(t,(function(e){return e instanceof n}))},close:function(e){var t=this.current();if(t)return t.close(e)},_onReady:function(){var t=this;if(t.autoBind){var i=e(t.autoBind);i.each((function(){t.attach(e(this))})),e(document).on("click",t.autoBind,(function(n){if(!n.isDefaultPrevented()){var s=e(n.currentTarget);if(i.length!==(i=i.add(s)).length){var o=t.attach(s);(!o.filter||e(n.target).parentsUntil(s,o.filter).length>0)&&o.handler(n)}}}))}},_callbackChain:{onKeyUp:function(t,i){return 27===i.keyCode?(this.closeOnEsc&&e.ulpmodal.close(i),!1):t(i)},beforeOpen:function(t,i){return e(document.documentElement).addClass("with-ulpmodal"),this._previouslyActive=document.activeElement,this._$previouslyTabbable=e("a, input, select, textarea, iframe, button, iframe, [contentEditable=true]").not("[tabindex]").not(this.$instance.find("button")),this._$previouslyWithTabIndex=e("[tabindex]").not('[tabindex="-1"]'),this._previousWithTabIndices=this._$previouslyWithTabIndex.map((function(t,i){return e(i).attr("tabindex")})),this._$previouslyWithTabIndex.add(this._$previouslyTabbable).attr("tabindex",-1),"function"==typeof document.activeElement.trigger&&document.activeElement.trigger("blur"),t(i)},afterClose:function(t,i){var n=t(i),s=this;return this._$previouslyTabbable.removeAttr("tabindex"),this._$previouslyWithTabIndex.each((function(t,i){e(i).attr("tabindex",s._previousWithTabIndices[t])})),"function"==typeof this._previouslyActive.trigger&&this._previouslyActive.trigger("focus"),0===r.opened().length&&e(document.documentElement).removeClass("with-ulpmodal"),n},onResize:function(e,t){return this.resize(this.$content.naturalWidth,this.$content.naturalHeight),e(t)},afterContent:function(e,t){var i=e(t);return this.$instance.find("[autofocus]:not([disabled])").trigger("focus"),this.onResize(t),i}}}),e.ulpmodal=r,e.fn.ulpmodal=function(e,t){return r.attach(this,e,t),this},e((function(){r._onReady()}))}else"console"in window&&window.console.info("Too much lightness, WordpressUlikeAjaxModal needs jQuery.");function r(e,t){if(!(this instanceof r)){var i=new r(e,t);return i.open(),i}this.id=r.id++,this.setup(e,t),this.chainCallbacks(r._callbackChain)}})),function(e,t,i,n){"use strict";var s="WordpressUlikeNotifications",o={messageType:"success",messageText:"Hello World!",timeout:8e3,messageElement:"wpulike-message",notifContainer:"wpulike-notification"};function a(t,i){this.element=t,this.$element=e(t),this.settings=e.extend({},o,i),this._defaults=o,this._name=s,this.init()}e.extend(a.prototype,{init:function(){this._message(),this._container(),this._append(),this._remove()},_message:function(){this.$messageElement=e("<div/>").addClass(this.settings.messageElement+" wpulike-"+this.settings.messageType).text(this.settings.messageText)},_container:function(){e("."+this.settings.notifContainer).length||this.$element.append(e("<div/>").addClass(this.settings.notifContainer)),this.$notifContainer=this.$element.find("."+this.settings.notifContainer)},_append:function(){this.$notifContainer.append(this.$messageElement).trigger("WordpressUlikeNotificationAppend")},_remove:function(){var t=this;this.$messageElement.on("click",(function(){e(this).fadeOut(300,(function(){e(this).remove(),e("."+t.settings.messageElement).length||t.$notifContainer.remove()})).trigger("WordpressUlikeRemoveNotification")})),t.settings.timeout&&setTimeout((function(){t.$messageElement.fadeOut(300,(function(){e(this).remove(),e("."+t.settings.messageElement).length||t.$notifContainer.remove()})).trigger("WordpressUlikeRemoveNotification")}),t.settings.timeout)}}),e.fn[s]=function(e){return this.each((function(){new a(this,e)}))}}(jQuery,window,document),function(e){e.fn.WordpressUlikeTooltip=function(t){if(this.length>1)return this.each((function(){e(this).WordpressUlikeTooltip(t)})),this;if(void 0===this||1!==this.length)return!1;const i=e(this);t=e.extend({},e.WordpressUlikeTooltip.defaults,t,i.data());let n=i.attr("title");void 0!==n&&n.length&&(t.title=n),t.class+=" ulf-"+t.theme+"-theme",t.class+=" ulf-"+t.size,t.trigger=t.trigger.toLowerCase().trim();let s={dom:this,dom_wrapped:i,position_debug:t.position_debug,trigger:t.trigger,id:t.id,title:t.title,content:t.title,child_class:t.child,theme:t.theme,class:t.class,position:t.position,close_on_outside_click:t.close_on_outside_click,singleton:t.singleton,dataAttr:"ulike-tooltip",createTooltipHTML:function(){return`<div class='ulf-tooltip ${s.class}' role='tooltip'><div class='ulf-arrow'></div><div class='ulf-content'>${s.content}</div></div>`},destroy:function(){const t=s.dom_wrapped.data(s.dataAttr);null!=t&&(t.dom_wrapped.off("touchstart mouseenter",t.show),t.dom_wrapped.off("click",t.preventDefaultHandler),e(window).off("resize",t.onResize),t.isVisible()&&t.hide(),t.dom_wrapped.data(t.dataAttr,null))},initialize:function(){return s.dom_wrapped.on("touchstart mouseenter",s.show),s.dom_wrapped.on("click",s.preventDefaultHandler),e.WordpressUlikeTooltip.body_click_initialized||(e(document).on("touchstart mousedown",s.onClickOutside),e.WordpressUlikeTooltip.bodyClickInitialized=!0),s.dom_wrapped.data(s.dataAttr,s),e(document).on("WordpressUlikeLikersMarkupUpdated",(function(e,t,i,n){if("popover"==i)if(n.length)s.show();else{let e=t.data(s.dataAttr);null!=e&&e.destroy()}})),s.dom},preventDefaultHandler:function(e){return e.preventDefault(),!1},show:function(t){if(s.isVisible())return!1;s.singleton&&s.hideAllVisible();const i=e("body");(void 0===t||t)&&"function"==typeof s.title&&(s.content=s.title(s.dom_wrapped,s)),i.append(s.createTooltipHTML()),s.tooltip=e(".ulf-tooltip:last"),s.positionTooltip(),e(window).on("resize",s.onResize);const n="ulp-dom-"+s.id;s.tooltip.attr("id",n),s.dom.attr("aria-describedby",n),e.WordpressUlikeTooltip.visible.push(s),(void 0===t||t)&&s.dom.trigger("ulf-show",[s.tooltip,s.hide]),s.observer=new MutationObserver((function(e){s.positionTooltip()}));s.observer.observe(document.body,{attributes:!0,childList:!0,subtree:!0})},isVisible:function(){return e.inArray(s,e.WordpressUlikeTooltip.visible)>-1},hideAllVisible:function(){return e.each(e.WordpressUlikeTooltip.visible,(function(e,t){t.dom_wrapped.hasClass("ulf-focused")||t.hide()})),this},hide:function(t){s.observer&&(s.observer.disconnect(),s.observer=null),e(window).off("resize",s.onResize),s.dom.attr("aria-describedby",null),s.tooltip&&s.tooltip.length&&s.tooltip.remove(),(void 0===t||t)&&s.dom.trigger("ulf-hide"),"click"!==s.trigger&&s.dom_wrapped.off("touchstart mousedown",s.hide);var i=e.inArray(s,e.WordpressUlikeTooltip.visible);return e.WordpressUlikeTooltip.visible.splice(i,1),s.dom},onResize:function(){s.hide(!1),s.show(!1)},onClickOutside:function(t){const i=e(t.target);i.hasClass("ulf-tooltip")||i.parents(".ulf-tooltip:first").length||e.each(e.WordpressUlikeTooltip.visible,(function(e,t){void 0!==t&&t.close_on_outside_click&&(i!==t.dom_wrapped||"focus"!==t.trigger&&"hoverfocus"!==t.trigger)&&t.hide()}))},positionTooltip:function(){s.positionDebug("-- Start positioning --"),s.dom_wrapped.length&&s.dom_wrapped.is(":visible")||(s.positionDebug("Elem no longer exists. Removing tooltip"),s.hide(!0));let e=s.tooltip.find(".ulf-arrow"),[t,i,n,o,a,r]=s.calculateSafePosition(s.position);return void 0===a&&"auto"!==s.position&&(s.positionDebug("Couldn't fit preferred position"),[t,i,n,o,a,r]=s.calculateSafePosition("auto")),void 0===a?(s.positionDebug("Doesn't appear to fit. Displaying centered"),s.tooltip.addClass("ulf-centered").css({top:"50%",left:"50%","margin-left":-n/2,"margin-top":-o/2}),e&&e.length&&e.remove(),void s.positionDebug("-- Done positioning --")):(s.positionDebug({"Setting Position":{Left:a,Top:r}}),s.tooltip.css("left",a),s.tooltip.css("top",r),i<60&&(s.positionDebug("Element is less than "+i+"px. Setting arrow to hug the side tighter"),t+=" ulf-arrow-super-hug"),e.addClass("ulf-arrow-"+t),s.positionDebug("-- Done positioning --"),s)},calculateSafePosition:function(e){let t,i,n,o=s.tooltip.find(".ulf-arrow"),a=s.dom_wrapped.offset(),r=s.dom_wrapped.outerHeight(),l=s.dom_wrapped.outerWidth(),u=s.tooltip.outerWidth(),d=s.tooltip.outerHeight(),c=document.querySelector("body").offsetWidth,p=document.querySelector("body").offsetHeight,h=o.is(":visible")?o.outerHeight():0,f=o.is(":visible")?o.outerWidth():0,m={};if(m.below=p-(d+r+a.top)>5,m.above=a.top-d>5,m.vertical_half=a.top+l/2-d/2>5,m.right=c-(u+l+a.left)>5,m.right_half=c-a.left-l/2-u/2>5,m.right_full=c-a.left-u>5,m.left=a.left-u>5,m.left_half=a.left+l/2-u/2>5,m.left_full=a.left-u>5,s.positionDebug({"Clicked Element":{Left:a.left,Top:a.top}}),s.positionDebug({"Element Dimensions":{Height:r,Width:l},"Tooltip Dimensions":{Height:d,Width:u},"Window Dimensions":{Height:p,Width:c},"Arrow Dimensions":{Height:h,Width:f}}),s.positionDebug(m),("auto"===e||"bottom"===e)&&m.below&&m.left_half&&m.right_half)s.positionDebug("Displaying below, centered"),t="top",i=a.left-u/2+l/2,n=a.top+r+h/2;else if(("auto"===e||"top"===e)&&m.above&&m.left_half&&m.right_half){if(s.positionDebug("Displaying above, centered"),t="bottom",s.child_class){let e=s.dom_wrapped.find(s.child_class).first();i=e.offset().left-u/2+e.width()/2}else i=a.left-u/2+l/2;n=a.top-d-h/2}else("auto"===e||"left"===e)&&m.left&&m.vertical_half?(s.positionDebug("Displaying left, centered"),t="right",i=a.left-u-f/2,n=a.top+r/2-d/2):("auto"===e||"right"===e)&&m.right&&m.vertical_half?(s.positionDebug("Displaying right, centered"),t="left",i=a.left+l+f/2,n=a.top+r/2-d/2):("auto"===e||"bottom"===e)&&m.below&&m.right_full?(s.positionDebug("Displaying below, to the right"),t="top ulf-arrow-hug-left",i=a.left,n=a.top+r+h/2):("auto"===e||"bottom"===e)&&m.below&&m.left_full?(s.positionDebug("Displaying below, to the left"),t="top ulf-arrow-hug-right",i=a.left+l-u,n=a.top+r+h/2):("auto"===e||"top"===e)&&m.above&&m.right_full?(s.positionDebug("Displaying above, to the right"),t="bottom ulf-arrow-hug-left",i=a.left,n=a.top-d-h/2):("auto"===e||"top"===e)&&m.above&&m.left_full&&(s.positionDebug("Displaying above, to the left"),t="bottom ulf-arrow-hug-right",i=a.left+l-u,n=a.top-d-h/2);return[t,l,u,d,i,n]},positionDebug:function(e){return!!s.position_debug&&("object"==typeof e?console.table(e):console.log(`Position: ${e}`))}};return s.destroy(),s.initialize()},e.WordpressUlikeTooltip={},e.WordpressUlikeTooltip.visible=[],e.WordpressUlikeTooltip.body_click_initialized=!1,e.WordpressUlikeTooltip.defaults={id:Date.now(),title:"",trigger:"hoverfocus",position:"auto",class:"",theme:"black",size:"small",singleton:!0,close_on_outside_click:!0}}(jQuery),function(e,t,i,n){"use strict";var s="WordpressUlike",o=(e(t),e(i)),a={ID:0,nonce:0,type:"",append:"",appendTimeout:2e3,displayLikers:!1,likersTemplate:"default",disablePophover:!0,isTotal:!1,factor:"",template:"",counterSelector:".count-box",generalSelector:".wp_ulike_general_class",buttonSelector:".wp_ulike_btn",likersSelector:".wp_ulike_likers_wrapper"},r={"ulike-id":"ID","ulike-nonce":"nonce","ulike-type":"type","ulike-append":"append","ulike-is-total":"isTotal","ulike-display-likers":"displayLikers","ulike-likers-style":"likersTemplate","ulike-disable-pophover":"disablePophover","ulike-append-timeout":"appendTimeout","ulike-factor":"factor","ulike-template":"template"};function l(t,i){for(var n in this.element=t,this.$element=e(t),this.settings=e.extend({},a,i),this._defaults=a,this._name=s,this.buttonElement=this.$element.find(this.settings.buttonSelector),r){var o=this.buttonElement.data(n);undefined!==o&&(this.settings[r[n]]=o)}this.generalElement=this.$element.find(this.settings.generalSelector),this.counterElement=this.generalElement.find(this.settings.counterSelector),this.counterElement.length&&this.counterElement.each(function(t,i){void 0!==e(i).data("ulike-counter-value")&&e(i).html(e(i).data("ulike-counter-value"))}.bind(this)),this.likersElement=this.$element.find(this.settings.likersSelector),this.init()}e.extend(l.prototype,{init:function(){this.buttonElement.on("click",this._initLike.bind(this)),this.generalElement.one("mouseenter",this._updateLikers.bind(this))},_ajax:function(t,i){e.ajax({url:UlikeProCommonConfig.AjaxUrl,type:"POST",dataType:"json",data:t}).done(i)},_initLike:function(e){e.stopPropagation(),this._maybeUpdateElements(e),this._updateSameButtons(),this._updateSameLikers(),this.buttonElement.prop("disabled",!0),o.trigger("WordpressUlikeLoading",this.element),this.generalElement.addClass("wp_ulike_is_loading"),this._ajax({action:"wp_ulike_process",id:this.settings.ID,nonce:this.settings.nonce,factor:this.settings.factor,type:this.settings.type,template:this.settings.template,displayLikers:this.settings.displayLikers,likersTemplate:this.settings.likersTemplate},function(e){this.generalElement.removeClass("wp_ulike_is_loading"),e.success?void 0!==e.data.hasToast&&void 0!==e.data.modalTemplate&&e.data.modalTemplate?this._openModal(e.data.modalTemplate):(this._updateMarkup(e),this._appendChild()):e.data.hasToast&&this._sendNotification("error",e.data.message),this.buttonElement.prop("disabled",!1),o.trigger("WordpressUlikeUpdated",this.element)}.bind(this))},_openModal:function(t){var i=e("<div/>").addClass("ulpmodal-ajax-wrapper").html(t);e.ulpmodal(i,{closeOnClick:"background",afterOpen:function(e){o.trigger("WordpressUlikeModalAfterOpen",e)},closeOnEsc:!0})},_maybeUpdateElements:function(t){this.buttonElement=e(t.currentTarget),this.generalElement=this.buttonElement.closest(this.settings.generalSelector),this.counterElement=this.generalElement.find(this.settings.counterSelector),this.settings.factor=this.buttonElement.data("ulike-factor")},_appendChild:function(){if(""!==this.settings.append){var t=e(this.settings.append);this.buttonElement.append(t),this.settings.appendTimeout&&setTimeout((function(){t.detach()}),this.settings.appendTimeout)}},_updateMarkup:function(e){this._setSbilingElement(),this._setSbilingButtons(),this._updateGeneralClassNames(e.data.status),null!==e.data.data&&(5!=e.data.status&&(this.__updateCounter(e.data.data),this.settings.displayLikers&&void 0!==e.data.likers&&this._updateLikersMarkup(e.data.likers)),this._updateButton(e.data.btnText,e.data.status)),e.data.hasToast&&this._sendNotification(e.data.messageType,e.data.message),e.data.modalAfterSuccess&&this._openModal(e.data.modalAfterSuccess)},_updateGeneralClassNames:function(e){var t="wp_ulike_is_not_liked",i="wp_ulike_is_liked",n="wp_ulike_is_unliked",s="wp_ulike_click_is_disabled";switch(this.siblingElement.length&&this.siblingElement.removeClass(this._arrayToString([i,n])),e){case 1:this.generalElement.addClass(i).removeClass(t),this.generalElement.children().first().addClass(s);break;case 2:this.generalElement.addClass(n).removeClass(i);break;case 3:this.generalElement.addClass(i).removeClass(n);break;case 0:case 5:this.generalElement.addClass(s),this.siblingElement.length&&this.siblingElement.addClass(s)}},_arrayToString:function(e){return e.join(" ")},_setSbilingElement:function(){this.siblingElement=this.generalElement.siblings()},_setSbilingButtons:function(){this.siblingButton=this.buttonElement.siblings(this.settings.buttonSelector)},__updateCounter:function(e){"object"!=typeof e?this.counterElement.attr("data-ulike-counter-value",e).html(e):this.settings.isTotal&&void 0!==e.sub?this.counterElement.attr("data-ulike-counter-value",e.sub).html(e.sub):"down"===this.settings.factor?(this.counterElement.attr("data-ulike-counter-value",e.down).html(e.down),this.siblingElement.length&&this.siblingElement.find(this.settings.counterSelector).attr("data-ulike-counter-value",e.up).html(e.up)):(this.counterElement.attr("data-ulike-counter-value",e.up).html(e.up),this.siblingElement.length&&this.siblingElement.find(this.settings.counterSelector).attr("data-ulike-counter-value",e.down).html(e.down)),o.trigger("WordpressUlikeCounterUpdated",[this.buttonElement])},_updateLikers:function(e){if(this.settings.displayLikers){if("popover"==this.settings.likersTemplate&&this.$element.data("ulike-tooltip"))return;if(["default","pile"].includes(this.settings.likersTemplate)&&this.likersElement.length)return;return this.generalElement.addClass("wp_ulike_is_getting_likers_list"),this._ajax({action:"wp_ulike_get_likers",id:this.settings.ID,nonce:this.settings.nonce,type:this.settings.type,displayLikers:this.settings.displayLikers,likersTemplate:this.settings.likersTemplate},function(e){this.generalElement.removeClass("wp_ulike_is_getting_likers_list"),e.success&&this._updateLikersMarkup(e.data)}.bind(this)),e.stopImmediatePropagation(),!1}},_updateLikersMarkup:function(t){"popover"==this.settings.likersTemplate?(this.likersElement=this.$element,t.template&&this.likersElement.WordpressUlikeTooltip({id:this.settings.type.toLowerCase()+"-"+this.settings.ID,title:t.template,position:"top",child:this.settings.generalSelector,theme:"white",size:"tiny",trigger:"hover"})):(this.likersElement.length||(this.likersElement=e(t.template).appendTo(this.$element)),t.template?this.likersElement.show().html(t.template):this.likersElement.hide().empty()),o.trigger("WordpressUlikeLikersMarkupUpdated",[this.likersElement,this.settings.likersTemplate,t.template])},_updateSameButtons:function(){var e=void 0!==this.settings.factor?"_"+this.settings.factor:"";this.sameButtons=o.find(".wp_"+this.settings.type.toLowerCase()+e+"_btn_"+this.settings.ID),this.sameButtons.length>1&&(this.buttonElement=this.sameButtons,this.generalElement=this.buttonElement.closest(this.settings.generalSelector),this.counterElement=this.generalElement.find(this.settings.counterSelector))},_updateSameLikers:function(){this.sameLikers=o.find(".wp_"+this.settings.type.toLowerCase()+"_likers_"+this.settings.ID),this.sameLikers.length>1&&(this.likersElement=this.sameLikers)},_getLikersElement:function(){return this.likersElement},_updateButton:function(e,t){this.buttonElement.hasClass("wp_ulike_put_image")?(4==t?this.buttonElement.addClass("image-unlike wp_ulike_btn_is_active"):this.buttonElement.toggleClass("image-unlike wp_ulike_btn_is_active"),this.siblingElement.length&&this.siblingElement.find(this.settings.buttonSelector).removeClass("image-unlike wp_ulike_btn_is_active"),this.siblingButton.length&&this.siblingButton.removeClass("image-unlike wp_ulike_btn_is_active")):this.buttonElement.hasClass("wp_ulike_put_text")&&null!==e&&("down"===this.settings.factor?(this.buttonElement.find("span").html(e.down),this.siblingElement.length&&this.siblingElement.find(this.settings.buttonSelector).find("span").html(e.up)):(this.buttonElement.find("span").html(e.up),this.siblingElement.length&&this.siblingElement.find(this.settings.buttonSelector).find("span").html(e.down)))},_sendNotification:function(t,n){e(i.body).WordpressUlikeNotifications({messageType:t,messageText:n})}}),e.fn[s]=function(t){return this.each((function(){e.data(this,"plugin_"+s)||e.data(this,"plugin_"+s,new l(this,t))}))}}(jQuery,window,document),function(e){function t(t,i,n){var s=e(t)[0];new(window.MutationObserver||window.WebKitMutationObserver)((function(t){t.forEach((function(t){if(t.addedNodes.length)for(var s=e(t.addedNodes).find(i),o=0,a=s.length;o<a;o++)n(s[o])}))})).observe(s,{childList:!0,subtree:!0})}e((function(){e(".ulp-ajax-form").WordpressUlikeAjaxForms(),void 0!==window._goodshare&&window._goodshare.reNewAllInstance()})),e(".wpulike").WordpressUlike(),t("body",".wpulike",(function(t){e(t).WordpressUlike()})),t("body",".ulp-social-wrapper",(function(e){void 0!==window._goodshare&&window._goodshare.reNewAllInstance()})),t("body",".ulp-ajax-form",(function(t){e(t).WordpressUlikeAjaxForms()})),t("body",".ulp-recaptcha-field",(function(t){e(document).trigger("UlpRecaptchaReload",[this.element])})),e(".ulp-2fa-remove").on("click",(function(t){if(t.preventDefault(),confirm("Are you sure you want to make this change?")){var i=e(this),n=i.closest(".ulp-2fa-item");e.ajax({data:{action:"ulp_two_factor_remove",nonce:i.data("nonce"),key:i.data("key")},dataType:"json",type:"POST",url:UlikeProCommonConfig.AjaxUrl,success:function(t){t.success&&n.fadeOut(),e(document.body).WordpressUlikeNotifications({messageType:t.data.status,messageText:t.data.message})}})}})),e(document).on("click","a[data-form-toggle]",(function(t){t.preventDefault();var i=e(this),n=i.closest(".ulp-ajax-form"),s=n.find("form");s.addClass("ulp-loading"),e.ajax({data:{action:"ulp_forms_toggle",request:i.data("form-toggle")},dataType:"json",type:"POST",url:UlikeProCommonConfig.AjaxUrl,success:function(t){if(t.success){var i=e(t.data.content).WordpressUlikeAjaxForms();n.replaceWith(i)}else e(document.body).WordpressUlikeNotifications({messageType:t.data.status,messageText:t.data.message});s.removeClass("ulp-loading")}})}))}(jQuery);